<p align="center">
  <img src=".assets/devika-avatar.png" alt="Devika Logo" width="250">
</p>

<h1 align="center">🧩 Devika VS Code Extension - 綜合專案文檔 👩‍💻</h1>

<p align="center">
  <strong>一個深度整合 VS Code 的 AI 開發助理，具備程式碼情境理解、任務代理和 Git 整合功能</strong>
</p>

<p align="center">
  <img src="https://img.shields.io/badge/版本-v0.1.0-blue.svg" alt="Version">
  <img src="https://img.shields.io/badge/狀態-生產就緒-green.svg" alt="Status">
  <img src="https://img.shields.io/badge/包大小-6.64MB-orange.svg" alt="Package Size">
  <img src="https://img.shields.io/badge/TypeScript-100%25-blue.svg" alt="TypeScript">
</p>

> [!NOTE]
> 本文件是 Devika VS Code Extension 專案所有 Markdown 文件的整合版本。它提供了一個全面性的視圖，涵蓋了專案的各個方面，從高層次的概述到深入的技術實現細節。

---

## **目錄**

1.  [**專案概覽**](#1-專案概覽)
    *   [關於專案](#關於專案)
    *   [核心功能](#核心功能)
    *   [專案成就](#專案成就)
2.  [**快速入門**](#2-快速入門)
    *   [系統需求](#系統需求)
    *   [安裝與設定](#安裝與設定)
3.  [**使用指南**](#3-使用指南)
    *   [智能 AI 助理](#智能-ai-助理)
    *   [智能功能詳解](#智能功能詳解)
    *   [切換 LLM 模型](#切換-llm-模型)
4.  [**開發者中心**](#4-開發者中心)
    *   [系統架構](#系統架構)
    *   [開發環境設定](#開發環境設定)
    *   [Augment 插件開發](#augment-插件開發)
    *   [故障排除](#故障排除)
5.  [**專案規劃與歷史**](#5-專案規劃與歷史)
    *   [開發計畫](#開發計畫)
    *   [未來增強計畫](#未來增強計畫)
6.  [**技術實現深度解析 (附錄)**](#6-技術實現深度解析-附錄)
    *   [進階任務管理系統](#進階任務管理系統)
    *   [類 Kilo Code AI 代理](#類-kilo-code-ai-代理)
    *   [VS Code API 爬蟲系統](#vs-code-api-爬蟲系統)
    *   [多專案智能分析](#多專案智能分析)
    *   [Gemini API 整合](#gemini-api-整合)
7.  [**授權條款**](#7-授權條款)

---

## **1. 專案概覽**

### **關於專案**

Devika VS Code Extension 是一個深度整合進 VS Code 的 AI 開發助理，專為提升開發效率而設計。它不僅能執行指令，更能主動理解專案的程式碼結構與 Git 脈絡，提供智能的開發建議和自動化任務管理。

**核心理念**: 打造一款能「觀察、理解、建議、執行」的完整開發工作流助理。

### **核心功能**

| 功能分類 | 特色 |
| :--- | :--- |
| **🤖 AI 模型支援** | 支援 Claude 3, GPT-4, Gemini Pro，並可一鍵切換。 |
| **🧠 智能程式碼分析** | 使用 Tree-sitter 精準理解程式碼結構，自動建立符號索引。 |
| **📋 任務代理系統** | 將 AI 建議轉換為可追蹤的任務，具備狀態與優先級管理。 |
| **🔗 深度 Git 整合** | 自動生成 Commit 訊息、總結變更、追蹤歷史。 |
| **🛠️ 程式碼重構與優化** | 提供重構建議，一鍵應用，並能自動生成單元測試。 |
| **📝 TODO 與任務管理** | 自動掃描程式碼註解 (TODO, FIXME) 並轉換為任務。 |
| **🎨 現代化 UI** | 基於 Webview 的原生 VS Code 整合介面，提供即時更新。 |

### **專案成就**

本專案已 **100% 完成** 所有規劃的功能，並達到 **生產就緒 (Production-Ready)** 狀態。

*   **功能完整性**: 成功實現了 7 個 Sprint 中的全部 67 個任務，功能超越最初規劃。
*   **技術創新**:
    *   首創 VS Code API 自動掃描系統。
    *   創新的多模式 AI 代理架構。
    *   完整的 SQLite + Git 整合方案。
    *   智能依賴關係視覺化系統。
*   **高品質**: 專案使用嚴格的 TypeScript 類型檢查，達成零編譯錯誤，並具備完善的錯誤處理機制。
*   **立即可用**: 專案已成功打包為 `devika-vscode-0.1.0.vsix`，可立即安裝發布。

---

## **2. 快速入門**

### **系統需求**

*   **VS Code**: 1.74.0 或更高版本。
*   **Node.js**: 18.0 或更高版本 (僅供開發使用)。
*   **Git**: 用於版本控制功能。
*   **AI 模型 API 金鑰**: 至少需要 OpenAI, Anthropic (Claude), 或 Google (Gemini) 其中一個。

### **安裝與設定**

#### **步驟 1: 安裝擴充套件**

推薦使用 VSIX 文件安裝：
1.  下載 `devika-vscode-0.1.0.vsix` 文件。
2.  在 VS Code 中，打開命令面板 (`Ctrl+Shift+P`)。
3.  執行 "Extensions: Install from VSIX..." 並選擇下載的檔案。

或者，從原始碼構建：
```bash
git clone https://github.com/satanupup/devika.git
cd devika
npm install
npm run compile
npm run package
code --install-extension devika-vscode-0.1.0.vsix
```

#### **步驟 2: 檢查與激活**

1.  安裝後，重新載入 VS Code 窗口。
2.  在左側活動欄尋找 🤖 圖標。
3.  若未出現，請手動激活 (`Ctrl+Shift+P` -> "Devika: 啟動 AI 助理")。

#### **步驟 3: 設定 API 金鑰**

1.  打開命令面板 (`Ctrl+Shift+P`)。
2.  執行 "Devika: 設置 API 密鑰"。
3.  選擇您的 AI 提供商並輸入金鑰。

#### **步驟 4: 安裝必要依賴**

若從原始碼開發，請確保安裝了以下依賴：
```bash
npm install sqlite3 fs-extra uuid date-fns crypto-js
npm install @types/sqlite3 @types/fs-extra @types/uuid @types/crypto-js --save-dev
```

---

## **3. 使用指南**

### **智能 AI 助理**

Devika 的核心是其智能對話介面。您不再需要手動操作各種功能，只需透過自然語言與 AI 對話，它會自動理解您的意圖、分析專案、調用相應功能並提供智能建議。

**啟動方式**:
*   點擊活動欄的 🤖 圖標。
*   執行命令 `Devika: 啟動 AI 助理`。

**您可以問：**

| 類別 | 範例問題 |
| :--- | :--- |
| **📊 專案相關** | "這個專案的結構是什麼樣的？", "專案使用了哪些依賴？" |
| **📜 Git 相關** | "最近有什麼變更？", "這個檔案的修改歷史是什麼？" |
| **🔍 程式碼相關** | "這個函數是做什麼的？", "有哪些 TODO 需要處理？" |
| **🛠️ 開發相關** | "如何重構這個類？", "需要寫什麼測試？" |

### **智能功能詳解**

*   **自動專案索引**: 擴充功能啟動時會自動掃描並索引您的專案，理解程式碼結構。
*   **自動 TODO 掃描**: 自動發現程式碼中的 `TODO`, `FIXME` 註解，並將其轉換為可管理的任務。
*   **智能專案分析**: 深度分析專案結構、依賴關係和程式碼指標，並生成報告。
*   **Git 深度整合**: 查看提交歷史、分析變更內容。

### **切換 LLM 模型**

您可以根據不同需求，輕鬆在 OpenAI, Claude, Gemini 模型之間切換。

*   **最快方式**: 點擊 VS Code 底部狀態欄顯示的當前模型名稱。
*   **命令面板**: 執行 `Devika: 切換 LLM 模型`。

| 場景 | 推薦模型 |
| :--- | :--- |
| **日常開發** | 🧠 Claude 3.5 Sonnet 或 ⚡ GPT-4 Turbo |
| **複雜問題解決** | 🤖 GPT-4 或 🎯 Claude 3 Opus |
| **快速查詢** | 💨 GPT-3.5 Turbo 或 ⚡ Claude 3 Haiku |
| **大型專案分析** | 🚀 Gemini 1.5 Pro 或 🧠 Claude 3.5 Sonnet |

---

## **4. 開發者中心**

### **系統架構**

Devika 採用模組化架構，將核心 AI 引擎 (`devika-core`) 與 VS Code 特定實現分離，確保了高可維護性和擴展性。

```
devika/
├── devika-core/              # 🧠 平台無關的 AI 核心引擎
└── src/                      # 🎨 VS Code Extension 實作
```

### **開發環境設定**

1.  **複製儲存庫**: `git clone https://github.com/satanupup/devika.git`
2.  **安裝依賴**: `npm install`
3.  **編譯**: `npm run compile`
4.  **啟動除錯**: 在 VS Code 中按 `F5`。

### **Augment 插件開發**

您可以打造自己的 **Augment 插件**，本質上是建立一個會讀上下文、能執行工作流程、幫您改專案的 AI 助手。

**開發步驟**:
1.  **定義任務**: 明確您想讓 AI 做什麼（例如：生成 `ROADMAP.md`）。
2.  **分解工作流程**: 用人類邏輯描述完成任務的步驟。
3.  **撰寫 Agent 指令 (Prompt)**: 定義 AI 角色的語氣、目的和權限。
4.  **測試與微調**: 在 VS Code 中運行您的插件並持續優化。

詳細指南請參閱 `docs/AUGMENT_PLUGIN_GUIDE.md`。

### **故障排除**

| 問題 | 解決方案 |
| :--- | :--- |
| **命令 'devika.start' 找不到** | 擴充功能未正確激活。請嘗試重新安裝或完全重啟 VS Code。 |
| **看不到 Devika 圖標** | 檢查活動欄是否隱藏了圖標，或手動重新載入窗口。 |
| **核心管理器未初始化** | 擴充功能初始化出錯。請檢查輸出面板中的錯誤日誌。 |

---

## **5. 專案規劃與歷史**

### **開發計畫**

本專案採用敏捷開發方法，分為 7 個 Sprint 週期，總計 120-160 小時的開發時間。**目前所有 Sprint 皆已 100% 完成**。

*   **Sprint 1**: 建立基礎架構 (MVP) - ✅ **已完成**
*   **Sprint 2**: 第一個 Augment 插件 + UX 優化 - ✅ **已完成**
*   **Sprint 3**: 代理模式核心功能 - ✅ **已完成**
*   **Sprint 4**: 任務模組系統優化 - ✅ **已完成**
*   **Sprint 5**: 配置和管理功能增強 - ✅ **已完成**
*   **Sprint 6**: 工作流自動化 - ✅ **已完成**
*   **Sprint 7**: 優化與發布 - ✅ **已完成**

### **未來增強計畫**

雖然專案已功能完整，但仍規劃了長期的增強方向：

| 階段 | 重點 | 優先級 |
| :--- | :--- | :--- |
| **Phase 1** | **性能和穩定性** (大型專案支援、啟動優化) | 🔥 高 |
| **Phase 2** | **用戶體驗提升** (UI/UX 現代化、高級配置) | 🟡 中 |
| **Phase 3** | **AI 能力增強** (更智能的程式碼理解、對話能力) | 🟡 中 |
| **Phase 4** | **協作功能** (團隊協作、雲端集成) | 🟢 低 |
| **Phase 5** | **生態系統建設** (第三方插件 API、社群建設) | 🟢 低 |

---

## **6. 技術實現深度解析 (附錄)**

### **進階任務管理系統**

*   **樹狀任務列表 UI**: 實作了類似 Augment 的任務管理介面，支援狀態視覺化、進度追蹤。
*   **SQLite 本地存儲**: 設計了包含 12 個核心資料表的完整資料庫架構，並透過 `DatabaseManager` 和 `TaskDAO` 進行高效的 CRUD 操作和事務管理。
*   **VS Code 問題查看器**: 整合 VS Code 診斷系統，並利用 LLM 提供智能修復建議和一鍵修復功能。

### **類 Kilo Code AI 代理**

*   **多模式系統**: 內建代碼、架構師、提問、調試、文檔等 5 種專業模式，每種模式有不同的系統提示和可用工具。
*   **完整工具系統**: 提供 `read_file`, `execute_command`, `apply_diff` 等 12 個核心工具，讓 AI 能與開發環境互動。
*   **上下文感知**: AI 代理能自動獲取當前工作區、活動檔案和選中文本作為上下文。

### **VS Code API 爬蟲系統**

*   **自動爬取與分析**: 開發了 `VSCodeAPICrawler`，能自動爬取官方 API 文檔，分析 API 的新增、更新和棄用。
*   **資料庫存儲**: 將爬取到的 API 資訊存儲在 8 個專門的 SQLite 資料表中。
*   **自動生成更新計畫**: `UpdatePlanGenerator` 能基於 API 變更，自動生成詳細的 Markdown 格式更新計畫，包含實作任務和工時估算。

### **多專案智能分析**

*   **自動專案檢測**: `MultiProjectAnalyzer` 能自動檢測工作區內的多個專案（如 Android App, SDK, Web App），並識別其類型、語言和依賴。
*   **深度分析**: 對每個子專案進行深度分析，包括源文件數量、主要依賴、配置文件等。
*   **智能總結**: 能夠生成整個工作區的結構概覽，並理解專案之間的關係。

### **Gemini API 整合**

*   **支援最新模型**: 完全支援 Gemini 2.5 和 2.0 系列模型，包括 Pro, Flash, Flash-Lite。
*   **智能思考功能**: 為 2.5 系列模型自動啟用 "Thinking" 功能，提升複雜推理能力。
*   **模型選擇建議**: 根據任務類型（日常開發、複雜任務、快速查詢等）提供最佳模型選擇建議。

---

## **7. 授權條款**

本專案採用 [MIT 授權條款](LICENSE)。